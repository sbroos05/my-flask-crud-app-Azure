az group create --resource-group <name>

acr, aci, resource group



Hier is een alles-in-Ã©Ã©n Bicep-bestand dat ervoor zorgt dat:
âœ… Azure Container Registry (ACR) altijd een image heeft (indien leeg, push een initieel image).
âœ… Container Instance (ACI) automatisch images uit ACR haalt bij elke nieuwe deployment.
âœ… VNet, subnet, Public IP en NSG worden aangemaakt en correct gekoppeld.
âœ… Container logs worden naar Azure Monitor gestuurd voor inzicht en troubleshooting.

ðŸ“Œ Hoe werkt dit?
1. ACR wordt aangemaakt en blijft behouden â€“ geen herhaalde pushes nodig.
2. De container haalt altijd de nieuwste image uit ACR â€“ geen handmatige image-push nodig.
3. Als ACR nog leeg is, push handmatig een image (Ã©Ã©nmalig) met:
- az acr build --image myimage:latest --registry myacr --file Dockerfile .
4. ACI haalt automatisch het laatst gepushte image binnen bij het starten.


ðŸš€ Hoe werkt de image-pull?
1. Je pusht de image Ã©Ã©n keer (indien niet aanwezig in ACR):
2. az acr build --image myimage:latest --registry myappacr --file Dockerfile .

Bij elke ACI-deployment pakt Azure automatisch de nieuwste versie.

Je hoeft de image niet steeds opnieuw te pushen â€“ de deployment werkt altijd.

ðŸ“Œ Waarom is dit beter?
âœ… Ã‰Ã©n enkel Bicep-bestand: Alles zit in Ã©Ã©n script â€“ VNet, Public IP, ACR, ACI, NSG.
âœ… Geen herhaalde image-push nodig: ACI haalt altijd de nieuwste image uit ACR.
âœ… Automatische logging & monitoring: Logs worden naar Azure Monitor gestuurd.
âœ… Beveiliging via VNet & NSG: Alleen poort 80 open voor HTTP-verkeer.
âœ… Eenvoudige herdeployments: Geen extra configuratie nodig â€“ gewoon az deployment group create uitvoeren!

Met dit bestand hoef je dus nooit meer handmatig te updaten, behalve als je een nieuwe image build.







ðŸ“Œ Samenvatting
1. Eerste keer deployen?            â†’ az deployment group create --resource-group myResourceGroup --template-file main.bicep
2. Nieuwe image pushen?             â†’ az acr build --image myimage:latest --registry myappacr --file Dockerfile .
3. Update zonder opnieuw deployen?  â†’ az container restart --name myappContainerGroup --resource-group myResourceGroup
4. Alles verwijderen behalve ACR?   â†’ az container delete, az network vnet delete, az network nsg delete, az monitor log-analytics workspace delete